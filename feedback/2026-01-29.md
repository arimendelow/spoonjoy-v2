# Feedback — 2026-01-29

Feedback collected during guide walkthrough.

---

## Items

### 1. Mobile header not responsive
- **Issue**: Header shows all items inline, breaks on mobile (Login + Sign Up buttons overflow)
- **Screenshot**: Header cramped, "Sign Up" button cut off on right edge
- **Fix**: Show mobile nav (hamburger menu) even when logged out
- **Note**: Can simplify mobile nav for unauthenticated users

### 2. Seeding doesn't work with D1
- **Issue**: `npm run db:seed` writes to SQLite, but app reads from D1
- **Impact**: Guide removed seeding instructions, but users want demo data + test creds
- **Fix needed**: Either:
  - Create SQL seed file for D1: `npx wrangler d1 execute spoonjoy-local --local --file=./migrations/seed.sql`
  - Or modify seed script to work with D1
- **Must include**: Demo user with known credentials (e.g., `demo@spoonjoy.com` / `demo1234`)
- **Status**: Claude Code working on this now

### 3. Dark mode not working on empty states
- **Issue**: "No recipes yet" text is white/light gray on light gray background — nearly invisible
- **Screenshot**: Empty recipes page, text unreadable
- **Fix**: Text color needs dark mode variant (e.g., `text-gray-600 dark:text-gray-300`)

### 4. "Create Recipe" button broken
- **Issue**: Button doesn't work (likely route/action not implemented)
- **Impact**: Guide walks through creating recipes but the feature isn't complete
- **Fix**: Either implement the route or update guide to reflect current state

### 5. Account Settings 404 ✅ FIXED
- **Issue**: Account settings link returns 404
- **Root cause**: `account.settings.tsx` exists but NOT registered in `routes.ts`
- **Fix**: Added to routes.ts

### 6. Guide is ahead of implementation
- **Issue**: Guide walks through creating/viewing recipes, cookbooks, etc. but most features aren't implemented
- **What actually works**: Login, signup, logout, empty recipe list
- **What doesn't work**: Create recipe, view recipe, cookbooks, shopping list, etc.
- **Fix needed**: Either implement features or scale back guide to match reality

### 7. Account settings page needs redesign
- **Issue**: Current design isn't great
- **Fix**: Spruce it up — better layout, styling, UX
- **Profile photo bugs**:
  - Non-square images overflow/don't fit properly (need `object-cover` + `overflow-hidden`)
  - Empty state shows "Profile photo" text awkwardly inside circle — needs better placeholder

### 8. Dark/light mode transition is harsh
- **Issue**: Instant blink when toggling themes
- **Fix**: Add CSS transition on body/root for smooth fade (e.g., `transition: background-color 0.2s, color 0.2s`)

### 10. TypeScript errors in account.settings.tsx
- **Errors**:
  - Property 'click' does not exist on type 'HTMLInputElement'
  - Property 'form' does not exist on type 'EventTarget'
  - Property 'files' does not exist on type 'EventTarget'
  - Type 'string' not assignable to Button color prop
- **Fix**: Add proper type assertions and narrow event target types

### 9. Prisma D1 Transaction Warning Investigation

**Warning message:**
> `prisma:warn Cloudflare D1 does not support transactions yet. When using Prisma's D1 adapter, implicit & explicit transactions will be ignored and run as individual queries, which breaks the guarantees of the ACID properties of transactions`

**Investigation findings:**

#### 1. Explicit transactions (`$transaction`)
- **None found.** No usage of `db.$transaction()` or `prisma.$transaction()` in the codebase.

#### 2. Implicit transaction patterns found

**a) `deleteMany` / `createMany` usage:**
- `app/routes/shopping-list.tsx:263,273` — `deleteMany` for clearing shopping list items
- `app/lib/step-output-use-mutations.server.ts:15,45` — `deleteMany` and `createMany` for step output uses

**b) Nested writes (create parent + child in one call):**
- `app/lib/oauth-user.server.ts:157-176` — Creates User + OAuth record in a single nested write

#### 3. Risk assessment

| Pattern | Location | Risk Level | Impact |
|---------|----------|------------|--------|
| `deleteMany` (shopping list) | shopping-list.tsx | **Low** | Only affects checked/all items for one user. Partial deletion is inconvenient but not catastrophic. |
| `deleteMany` + `createMany` (step outputs) | step-output-use-mutations.server.ts | **Medium** | If delete succeeds but create fails, step references could be lost. Recovery: user re-saves step. |
| Nested User + OAuth create | oauth-user.server.ts | **Medium** | If User creates but OAuth fails, user would exist without OAuth link. Recovery: user could re-authenticate and it would link. |

#### 4. Conclusion: Safe to suppress the warning

**Reasons:**
1. No financial transactions, payments, or inventory operations where ACID guarantees are critical
2. All affected operations have natural recovery paths (re-save, re-authenticate)
3. D1's eventual consistency is acceptable for a recipe management app
4. The warning creates noise in logs without actionable guidance

**Already addressed:** Warning was silenced in commit `e256496` by setting `log: ['error']` in the Prisma client configuration at `app/lib/db.server.ts:13`.

**Future considerations:**
- If adding payment/billing features, revisit this decision
- Monitor for D1 transaction support announcements from Cloudflare
- Consider explicit error handling for the nested User+OAuth creation if issues arise

